(function(){$.fn.moveline=function(options,callback){var _this=this;var $this=$(this);var defaultValue={height:2,position:'',color:'#F65637',animateTime:500,animateType:'easeOutBack',zIndex:'1',top:0,customTop:false,randomColor:false,randomOpacity:1,click:function(){},}
var opt=$.extend(defaultValue,options||{});$this.css({position:'relative',});var li_width=$this.children().outerWidth();var li_height=opt.position==='inner'?$this.children().outerHeight()-opt.height:$this.children().outerHeight();var li_left=$this.children().position().left;var li_marginLeft=Number($this.children().css('margin-left').replace(/[^0-9]+/g,''));var randomColor=function(){var opacity=opt.randomOpacity||1;var r=Math.floor(Math.random()*256);var g=Math.floor(Math.random()*256);var b=Math.floor(Math.random()*256);return "rgba("+r+','+g+','+b+','+opacity+")";};var color=opt.randomColor?randomColor():opt.color;if(opt.customTop)li_height=opt.top;var zIndex=opt.height>5?'-1':opt.zIndex;_this.moveLineDiv=$('<div class="nav_line"></div>').css({'position':'absolute','height':opt.height,'background':color,'top':li_height,'z-index':zIndex,}).appendTo($this);for(var i=0;i<$this.children().length;i++){if($this.children().eq(i).hasClass('active')){li_left=$this.children().eq(i).position().left;li_width=$this.children().eq(i).outerWidth();}}
_this.moveLineDiv.stop().animate({width:li_width,left:li_left+li_marginLeft},opt.animateTime,opt.animateType);$this.children().hover(function(){var li_marginLeft=Number($this.children().css('margin-left').replace(/[^0-9]+/g,''));var li_width=$(this).outerWidth();var li_left=$(this).position().left;_this.moveLineDiv.stop().animate({width:li_width,left:li_left+li_marginLeft},opt.animateTime,opt.animateType);},function(){for(var i=0;i<$this.children().length;i++){if($this.children().eq(i).hasClass('active')){li_left=$this.children().eq(i).position().left;li_width=$this.children().eq(i).outerWidth();}}
_this.moveLineDiv.stop().animate({width:li_width,left:li_left+li_marginLeft},opt.animateTime);});$this.children().on('click',function(){var ret={ele:$(this),index:$(this).index(),}
opt.click(ret);});return _this;}})(jQuery)